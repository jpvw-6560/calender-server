<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“… Calendar Server</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“…</text></svg>">
    <link rel="stylesheet" href="/css/style.css?v=1">
    <link rel="stylesheet" href="/css/notification.css?v=1">
</head>
<body>
    <div id="notification-container"></div>
    <div style="display:flex; justify-content:flex-end; align-items:center; padding:18px 32px 0 0;">
        <label class="switch-editmode">
            <input type="checkbox" id="editmode-toggle">
            <span class="slider round"></span>
            <span class="editmode-label">Mode Ã©dition</span>
        </label>
    </div>
    <div class="app-container">
        <!-- Barre de navigation -->
        <nav class="sidebar">
            <div class="logo">ğŸ“… Calendar Server</div>
            <div id="sidebar-month" style="text-align:center; font-size:18px; margin-bottom:18px; color:#1db954;"></div>
            <div class="calendar-nav" style="display:flex; flex-direction:column; gap:8px; margin-bottom:24px;">
                <button class="btn-calnav" data-calview="year">AnnÃ©e</button>
                <button class="btn-calnav btn-calnav-active" data-calview="month">Mois</button>
                <button class="btn-calnav" data-calview="week">Semaine</button>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-view="events">ğŸ“… Ã‰vÃ©nements</li>
                <li class="nav-item" data-view="stats">ğŸ“Š Statistiques</li>
            </ul>
            <div style="margin-top:32px; text-align:center;">
                <button id="btn-create-event" class="btn-calnav" style="width:90%;max-width:260px;">â• CrÃ©er un Ã©vÃ©nement</button>
            </div>
        </nav>
        <!-- Contenu principal -->
        <main class="main-content">
            <div id="content-view"></div>
        </main>
        <!-- Modale formulaire Ã©vÃ©nement -->
        <div id="modal-event" class="modal-event-bg" style="display:none;">
            <div class="modal-event-box">
                <div class="modal-event-header">
                    <span id="modal-event-title">CrÃ©er un Ã©vÃ©nement</span>
                    <button id="modal-event-close" title="Fermer">âœ–</button>
                </div>
                <form id="event-form">
                    <label>Type d'Ã©vÃ©nement :
                        <select id="event-type" name="type" required>
                            <option value="birthday">Anniversaire</option>
                            <option value="recurring">RÃ©current</option>
                            <option value="holiday">Vacances scolaires</option>
                            <option value="single">Ponctuel</option>
                        </select>
                    </label>
                    <div style="display:flex;flex-direction:column;gap:8px;">
                        <label id="recurrence-row" style="flex-direction:row;gap:12px;align-items:center;display:none;">
                            <span>RÃ©currence :</span>
                            <select id="event-recurrence" name="recurrence" style="width:180px;">
                                <option value="daily">Tous les jours</option>
                                <option value="weekly">Toutes les semaines</option>
                                <option value="biweekly">Tous les quinze jours</option>
                                <option value="monthly">Tous les mois</option>
                                <option value="yearly">Chaque annÃ©e</option>
                            </select>
                        </label>
                        <label style="flex-direction:row;gap:12px;align-items:center;">
                            <span>Date de l'Ã©vÃ©nement :</span>
                            <input type="date" id="event-date" name="date" required style="width:160px;">
                        </label>
                        <label style="flex-direction:row;gap:12px;">
                            <input type="checkbox" id="event-show-title" name="showTitle" checked>
                            <span>Afficher le texte dans la zone centrale :</span>
                            <input type="text" id="event-title" name="title" maxlength="64" placeholder="Texte ou nom (optionnel)" style="flex:1;">
                        </label>
                        <label style="flex-direction:row;gap:12px;align-items:center;">
                            <input type="checkbox" id="event-show-icon" name="showIcon" checked>
                            <span>Afficher une icÃ´ne dans la zone infÃ©rieure :</span>
                            <input type="text" id="event-icon" name="icon" maxlength="2" placeholder="ex: ğŸ‚" style="width:3em;text-align:center;">
                            <select id="event-icon-list" style="margin-left:8px;">
                                <option value="">(choisir)</option>
                                <option value="ğŸ‚">ğŸ‚ Anniversaire</option>
                                <option value="ğŸš—">ğŸš— Voiture</option>
                                <option value="ğŸ–ï¸">ğŸ–ï¸ Vacances</option>
                                <option value="ğŸ‘ï¸">ğŸ‘ï¸ Ophtalmo</option>
                                <option value="ğŸ”">ğŸ” RÃ©current</option>
                                <option value="ğŸ“Œ">ğŸ“Œ Ponctuel</option>
                                <option value="ğŸ“¦">ğŸ“¦ Cartons</option>
                                <option value="ğŸŸ¦">ğŸŸ¦ PMC (sac bleu)</option>
                                <option value="ğŸ—‘ï¸">ğŸ—‘ï¸ DÃ©chets rÃ©siduels</option>
                                <option value="ğŸŸ©">ğŸŸ© DÃ©chets organiques</option>
                                <option value="">(autre)</option>
                            </select>
                        </label>
                    </div>
                    <label style="display:flex;align-items:center;gap:8px;">
                        <input type="checkbox" id="event-telegram" name="sendTelegram">
                        <span class="slider round" style="width:32px;height:18px;"></span>
                        <span>Envoyer une notification Telegram Ã </span>
                        <input type="time" id="event-telegram-time" name="telegramTime" style="width:110px; display:none;">
                    </label>
                    <div id="event-fields"></div>
                    <div style="margin-top:18px; text-align:right;">
                        <button type="submit" class="btn-calnav" style="width:auto;">Enregistrer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="module" src="/js/app.js"></script>
</body>
</html>
